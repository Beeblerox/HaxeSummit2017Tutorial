# HKOSCon2017 Haxe Game Workshop

Workshop info: [Build a cross-platform game in Haxe](http://hkoscon.org/2017/topics/build-a-cross-platform-game-in-haxe/)

This is an [agar.io](https://agar.io/) clone to demonstrate the capability of Haxe in building cross platform games,
where codes are shared among multiple game platforms (web, mac, windows, android & ios),
as well as between game client and game server for multiplayer games.

## How to Build and Run

### Install Haxe

Get Haxe from http://haxe.org/download/.

### Install Dependencies

 * [Luxe](https://luxeengine.com). According to the instruction at https://luxeengine.com/get/:

   ```bash
   haxelib install snowfall
   haxelib run snowfall update luxe
   ```

 * [haxe-ws](https://github.com/soywiz/haxe-ws)

   ```bash
   haxelib install haxe-ws
   ```

 * [hxnodejs](https://github.com/HaxeFoundation/hxnodejs)

   ```bash
   haxelib install hxnodejs
   ```

 * [Node.js](https://nodejs.org/), and optionally [yarn](https://yarnpkg.com/).

### Install Visual Studio Code

Although in theory you can use any [IDE or text editor](https://haxe.org/documentation/introduction/editors-and-ides.html), we recommend using [Visual Studio Code](https://code.visualstudio.com/) with the [Haxe Extension Pack](https://marketplace.visualstudio.com/items?itemName=vshaxe.haxe-extension-pack), which offers the best Haxe support at the moment.

### Install C++ development tools

Depending on your OS, [Visual Studio](https://www.visualstudio.com/) (Windows), [XCode](https://developer.apple.com/xcode/) (Mac), or gcc (Linux).

### Server

```bash
haxe server.hxml
cd bin/server
npm install ws # or `yarn add ws`
node server.js
```

### Client

```bash
haxelib run flow run web
haxelib run flow run mac
haxelib run flow run windows
```

To give proper code completion, VS Code needs a hxml file, which can be generated by `haxelib run flow info [windows|mac|linux|web] --hxml > client.hxml`.
See https://github.com/vshaxe/vshaxe/wiki/Framework-Notes#snow.

## Shared Code

The `World` class contains the core game logic.
When the game is set to single-player mode, the `World` is run in the client.
In other words, the same piece of Haxe code for the `World` class is compiled into different platforms
(web, mac, windows, android, & ios).
When the game is in multi-player mode, the `World` is run on the server. Again, the same piece of 
Haxe code for the `World` class is compiled into the server language (nodejs for our choice here).

The `Command` and `Message` enums represents the protocol between the client and server in multiplayer
mode. The same piece of code is used in both client and server.

## Feedback / Questions

Feel free to [open issues](https://github.com/kevinresol/hkoscon2017-haxe-game/issues) or contact us directly.

## License

<p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
  <a rel="license"
     href="http://creativecommons.org/publicdomain/zero/1.0/">
    <img src="https://licensebuttons.net/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0" />
  </a>
  <br />
  To the extent possible under law,
  <a rel="dct:publisher"
     href="https://github.com/kevinresol/hkoscon2017-haxe-game">
    <span property="dct:title">Andy Li & Kevin Leung</span></a>
  has waived all copyright and related or neighboring rights to
  <span property="dct:title">"Build a cross-platform game in Haxe" workshop</span>.
This work is published from:
<span property="vcard:Country" datatype="dct:ISO3166"
      content="HK" about="https://github.com/kevinresol/hkoscon2017-haxe-game">
  Hong Kong</span>.
</p>
